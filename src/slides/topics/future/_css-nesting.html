<section data-transition="convex">
  <section>
    <h2>CSS Nesting</h2>
    <div class="baseline-badge newly">üü° Newly Available (2024)</div>
    <p class="fragment">Native <mark>nested selectors</mark></p>
  </section>

  <section>
    <h3>Finally, <mark>Native Nesting</mark>!</h3>
    <div class="before-after">
      <div class="before">
        <h4>‚ùå Before: Flat & Repetitive</h4>
        <pre><code class="language-css">/* Repetitive selectors */
.card {
  padding: 1.5rem;
  background: white;
  border-radius: 0.75rem;
}

.card:hover {
  box-shadow: 0 4px 6px rgba(0,0,0,0.1);
}

.card .title {
  font-size: 1.5rem;
  margin-bottom: 0.5rem;
}

.card .title a {
  color: #667eea;
  text-decoration: none;
}

.card .title a:hover {
  text-decoration: underline;
}

.card .content {
  color: #64748b;
}

.card .content p {
  margin-bottom: 1rem;
}</code></pre>
      </div>

      <div class="after">
        <h4>‚úÖ After: Clean Nesting</h4>
        <pre><code class="language-css">/* Organized hierarchy */
.card {
  padding: 1.5rem;
  background: white;
  border-radius: 0.75rem;
  
  &:hover {
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
  }
  
  .title {
    font-size: 1.5rem;
    margin-bottom: 0.5rem;
    
    a {
      color: #667eea;
      text-decoration: none;
      
      &:hover {
        text-decoration: underline;
      }
    }
  }
  
  .content {
    color: #64748b;
    
    p {
      margin-bottom: 1rem;
    }
  }
}</code></pre>
      </div>
    </div>
  </section>

  <section>
    <h3>Nesting <mark>Syntax</mark></h3>
    <div style="display: grid; gap: 1.5rem; margin-top: 2rem; font-size: 0.85rem;">
      <div class="fragment" style="background: #fef3c7; padding: 1.5rem; border-radius: 0.75rem; border: 2px solid #fbbf24;">
        <h4 style="margin-top: 0; color: #92400e;">& Nesting Selector</h4>
        <pre><code class="language-css">.button {
  background: #667eea;
  color: white;
  
  /* Pseudo-classes */
  &:hover {
    background: #5568d3;
  }
  
  /* Pseudo-elements */
  &::before {
    content: "‚Üí ";
  }
  
  /* Modifiers */
  &.large {
    padding: 1rem 2rem;
  }
  
  /* Adjacent */
  & + & {
    margin-left: 0.5rem;
  }
}</code></pre>
      </div>

      <div class="fragment" style="background: #fef3c7; padding: 1.5rem; border-radius: 0.75rem; border: 2px solid #fbbf24;">
        <h4 style="margin-top: 0; color: #92400e;">Direct Nesting (Must Start with &)</h4>
        <pre><code class="language-css">.card {
  /* ‚ùå Won't work - missing & */
  .title { }
  
  /* ‚úÖ Correct */
  & .title { }
  
  /* ‚úÖ Or use :is() */
  :is(.title) { }
  
  /* ‚ùå Wrong - element selectors need & */
  h2 { }
  
  /* ‚úÖ Correct */
  & h2 { }
}</code></pre>
      </div>

      <div class="fragment" style="background: #fef3c7; padding: 1.5rem; border-radius: 0.75rem; border: 2px solid #fbbf24;">
        <h4 style="margin-top: 0; color: #92400e;">Advanced Nesting</h4>
        <pre><code class="language-css">.article {
  /* Multiple & references */
  &:hover &-title {
    color: #667eea;
  }
  
  /* Media queries */
  @media (min-width: 768px) {
    display: grid;
    grid-template-columns: 1fr 2fr;
  }
  
  /* Container queries */
  @container (min-width: 400px) {
    padding: 2rem;
  }
}</code></pre>
      </div>
    </div>
  </section>

  <section>
    <h3>Practical <mark>Patterns</mark></h3>
    <div class="code-demo-split">
      <div class="code-example">
        <pre><code class="language-css">/* BEM-style with nesting */
.nav {
  display: flex;
  gap: 2rem;
  
  &__item {
    padding: 0.5rem 1rem;
    
    &--active {
      background: #667eea;
      color: white;
    }
  }
  
  &__link {
    text-decoration: none;
    
    &:hover {
      text-decoration: underline;
    }
  }
}

/* Form states */
.field {
  position: relative;
  
  & input {
    width: 100%;
    padding: 0.75rem;
    border: 2px solid #e2e8f0;
    
    &:focus {
      border-color: #667eea;
      outline: none;
      
      & + label {
        color: #667eea;
      }
    }
    
    &:invalid {
      border-color: #ef4444;
    }
  }
}</code></pre>
      </div>

      <div class="code-example">
        <pre><code class="language-css">/* Component variations */
.button {
  padding: 0.5rem 1rem;
  border: none;
  border-radius: 0.375rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s;
  
  /* Primary variant */
  &--primary {
    background: #667eea;
    color: white;
    
    &:hover {
      background: #5568d3;
    }
  }
  
  /* Secondary variant */
  &--secondary {
    background: transparent;
    color: #667eea;
    border: 2px solid #667eea;
    
    &:hover {
      background: #667eea;
      color: white;
    }
  }
  
  /* Disabled state */
  &:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    
    &:hover {
      background: inherit;
    }
  }
}</code></pre>
      </div>
    </div>
  </section>

  <section>
    <h3>Nesting with <mark>@layer & @scope</mark></h3>
    <div class="code-demo-split">
      <div class="code-example">
        <pre><code class="language-css">/* Combine with @layer */
@layer components {
  .card {
    padding: 1.5rem;
    
    @layer card-elements {
      .title {
        font-size: 1.5rem;
      }
      
      .content {
        color: #64748b;
      }
    }
  }
}

/* Combine with @scope */
@scope (.product) {
  .card {
    border: 1px solid #e2e8f0;
    
    & .price {
      font-size: 1.5rem;
      color: #667eea;
      
      &.sale {
        color: #ef4444;
      }
    }
  }
}</code></pre>
      </div>

      <div class="code-example">
        <pre><code class="language-css">/* Nested media & container queries */
.sidebar {
  container-type: inline-size;
  
  .widget {
    padding: 1rem;
    
    @media (min-width: 768px) {
      padding: 1.5rem;
    }
    
    @container (min-width: 300px) {
      display: grid;
      grid-template-columns: 1fr 1fr;
      
      & h3 {
        grid-column: 1 / -1;
      }
    }
  }
}

/* Nested :has() */
.article {
  & img {
    width: 100%;
  }
  
  &:has(img) {
    display: grid;
    grid-template-columns: 1fr 2fr;
    
    & img {
      aspect-ratio: 16/9;
    }
  }
}</code></pre>
      </div>
    </div>
  </section>

  <section>
    <h3>Benefits & <mark>Considerations</mark></h3>
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem; margin-top: 2rem; font-size: 0.85rem;">
      <div class="fragment" style="background: #d1fae5; padding: 1.5rem; border-radius: 0.75rem; border: 2px solid #10b981;">
        <h4 style="margin-top: 0; color: #065f46;">‚úÖ Benefits</h4>
        <ul style="margin: 0; padding-left: 1.5rem; color: #064e3b;">
          <li>Better organization</li>
          <li>Less repetition</li>
          <li>Clear hierarchy</li>
          <li>Scoped context</li>
          <li>No build step needed</li>
        </ul>
      </div>

      <div class="fragment" style="background: #fef3c7; padding: 1.5rem; border-radius: 0.75rem; border: 2px solid #fbbf24;">
        <h4 style="margin-top: 0; color: #92400e;">‚ö†Ô∏è Gotchas</h4>
        <ul style="margin: 0; padding-left: 1.5rem; color: #78350f;">
          <li>Must use <code>&</code> for type/class selectors</li>
          <li>Don't nest too deep (3-4 levels max)</li>
          <li>Still creates flat CSS output</li>
          <li>Specificity still matters</li>
        </ul>
      </div>

      <div class="fragment" style="background: #e0e7ff; padding: 1.5rem; border-radius: 0.75rem; border: 2px solid #6366f1; grid-column: 1 / -1;">
        <h4 style="margin-top: 0; color: #3730a3;">üí° Pro Tip</h4>
        <pre><code class="language-css">/* Combine all the new features! */
@layer components {
  @scope (.card) {
    :scope {
      container-type: inline-size;
      padding: 1.5rem;
      
      &:has(img) {
        display: grid;
        
        @container (min-width: 400px) {
          grid-template-columns: 200px 1fr;
        }
      }
    }
  }
}</code></pre>
      </div>
    </div>
  </section>
</section>
