<section>
  <h3>CSS Custom Functions (@function) üîÆ</h3>
  <div class="baseline-badge limited">üî¥ Proposal Stage</div>
</section>

<section>
  <h4>What are Custom Functions?</h4>
  <p>Define reusable calculation logic in CSS:</p>
  <ul>
    <li>Similar to custom properties, but with parameters</li>
    <li>Reduce repetitive calc() expressions</li>
    <li>Create design system utilities</li>
    <li>Make complex math reusable</li>
    <li>‚ö†Ô∏è Currently a CSSWG proposal</li>
  </ul>
</section>

<section>
  <h4>Proposed Syntax</h4>
  <pre><code class="language-css">/* Define a custom function */
@function --fluid-size(
  --min-size: 16px,
  --max-size: 24px,
  --min-vw: 320px,
  --max-vw: 1280px
) {
  result: clamp(
    var(--min-size),
    calc(
      var(--min-size) + 
      (var(--max-size) - var(--min-size)) * 
      (100vw - var(--min-vw)) / 
      (var(--max-vw) - var(--min-vw))
    ),
    var(--max-size)
  );
}

/* Use the function */
.heading {
  font-size: --fluid-size(18px, 48px, 320px, 1280px);
}

.text {
  font-size: --fluid-size(14px, 18px);
  /* Uses default viewport values */
}</code></pre>
</section>

<section>
  <h4>Example: Spacing System</h4>
  <pre><code class="language-css">/* Define spacing function */
@function --spacing(--multiplier: 1) {
  result: calc(var(--space-unit, 8px) * var(--multiplier));
}

/* Use in components */
.card {
  padding: --spacing(3);      /* 24px */
  margin-bottom: --spacing(4); /* 32px */
  gap: --spacing(2);          /* 16px */
}

.button {
  padding: --spacing(1.5) --spacing(3);
  /* 12px 24px */
}</code></pre>
</section>

<section>
  <h4>Example: Color Utilities</h4>
  <pre><code class="language-css">/* Define color manipulation function */
@function --alpha(--color, --opacity: 1) {
  result: color-mix(
    in srgb, 
    var(--color), 
    transparent calc((1 - var(--opacity)) * 100%)
  );
}

@function --shade(--color, --amount: 0.2) {
  result: color-mix(
    in srgb,
    var(--color),
    black calc(var(--amount) * 100%)
  );
}

/* Use in styles */
.overlay {
  background: --alpha(#667eea, 0.8);
}

.button:hover {
  background: --shade(var(--primary-color), 0.1);
}</code></pre>
</section>

<section>
  <h4>Example: Responsive Grid</h4>
  <pre><code class="language-css">/* Auto-responsive grid columns */
@function --auto-grid(
  --min-width: 250px,
  --gap: 1rem
) {
  result: repeat(
    auto-fit,
    minmax(
      min(100%, var(--min-width)),
      1fr
    )
  );
}

.grid {
  display: grid;
  grid-template-columns: --auto-grid(300px, 2rem);
  gap: 2rem;
}

.compact-grid {
  display: grid;
  grid-template-columns: --auto-grid(200px);
  gap: 1rem;
}</code></pre>
</section>

<section>
  <h4>Example: Easing Functions</h4>
  <pre><code class="language-css">/* Custom easing curve */
@function --ease-out-cubic(--progress) {
  result: calc(1 - pow(1 - var(--progress), 3));
}

@function --bounce(--progress) {
  result: calc(
    pow(2, -10 * var(--progress)) * 
    sin((var(--progress) - 0.075) * 2 * pi / 0.3) + 1
  );
}

/* Use in animations */
@keyframes slide {
  from {
    --t: 0;
    transform: translateX(
      calc(--ease-out-cubic(var(--t)) * 100px)
    );
  }
  to {
    --t: 1;
    transform: translateX(
      calc(--ease-out-cubic(var(--t)) * 100px)
    );
  }
}</code></pre>
</section>

<section>
  <h4>Current Workarounds</h4>
  <pre><code class="language-css">/* Until @function is available, use custom properties */
:root {
  --space-unit: 8px;
  
  /* Pre-calculate common values */
  --space-1: calc(var(--space-unit) * 1);
  --space-2: calc(var(--space-unit) * 2);
  --space-3: calc(var(--space-unit) * 3);
  --space-4: calc(var(--space-unit) * 4);
}

/* Or use CSS-in-JS / preprocessors */
/* SCSS */
@function fluid-size($min, $max, $min-vw: 320px, $max-vw: 1280px) {
  @return clamp(
    #{$min},
    calc(#{$min} + (#{$max} - #{$min}) * 
      (100vw - #{$min-vw}) / (#{$max-vw} - #{$min-vw})),
    #{$max}
  );
}</code></pre>
</section>

<section>
  <h4>Benefits Over Current Solutions</h4>
  <ul>
    <li>‚úÖ Native CSS, no build step required</li>
    <li>‚úÖ Reusable logic across stylesheets</li>
    <li>‚úÖ Type-safe with default parameters</li>
    <li>‚úÖ Better than repetitive calc() expressions</li>
    <li>‚úÖ Improves maintainability</li>
    <li>‚úÖ Works with CSS custom properties</li>
  </ul>
</section>

<section>
  <h4>Proposal Status & Timeline</h4>
  <ul>
    <li>üìã <strong>Status:</strong> CSSWG Discussion</li>
    <li>üóìÔ∏è <strong>Proposal:</strong> Active (2023-2024)</li>
    <li>üîç <strong>Specification:</strong> Draft phase</li>
    <li>‚è≥ <strong>Implementation:</strong> Not yet in browsers</li>
    <li>üéØ <strong>Estimated:</strong> 2026-2027 (optimistic)</li>
  </ul>
  <div class="resources">
    <p><strong>Resources:</strong></p>
    <ul>
      <li><a href="https://github.com/w3c/csswg-drafts/issues/9350" target="_blank">CSSWG Issue #9350: CSS Functions</a></li>
      <li><a href="https://css.oddbird.net/rwd/style-queries/" target="_blank">CSS Style Queries Proposal</a></li>
    </ul>
  </div>
</section>

<section>
  <h4>How to Prepare</h4>
  <ul>
    <li>‚úÖ Use CSS custom properties extensively</li>
    <li>‚úÖ Organize calc() expressions logically</li>
    <li>‚úÖ Document complex calculations</li>
    <li>‚úÖ Consider using CSS preprocessors now</li>
    <li>‚úÖ Follow CSSWG discussions</li>
    <li>‚úÖ Test with polyfills when available</li>
  </ul>
  <pre><code class="language-css">/* Structure code to be migration-ready */
:root {
  /* Future: @function --spacing(--mult) */
  --spacing-1: calc(var(--base) * 1);
  --spacing-2: calc(var(--base) * 2);
  --spacing-3: calc(var(--base) * 3);
}

/* Easy to convert when @function arrives */</code></pre>
</section>

<section>
  <h4>Key Takeaways</h4>
  <ul>
    <li>üîÆ Custom functions will revolutionize CSS logic</li>
    <li>‚ö†Ô∏è Currently in proposal stage (no browser support)</li>
    <li>‚úÖ Would eliminate repetitive calc() expressions</li>
    <li>‚úÖ Better than preprocessors (native, dynamic)</li>
    <li>‚úÖ Works with existing custom properties</li>
    <li>üìÖ Prepare now by organizing calculations</li>
    <li>üëÄ Watch CSSWG for updates</li>
  </ul>
</section>
